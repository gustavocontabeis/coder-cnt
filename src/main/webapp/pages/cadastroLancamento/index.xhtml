<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui" xmlns:cc="http://java.sun.com/jsf/composite">

<ui:composition template="/pages/templates/#{configManagedBean.template}.xhtml">

	<ui:define name="pageTitle">..:: Título ::..</ui:define>

	<ui:define name="body">
		<p:messages />
		<!-- 
			form
		 -->		
	</ui:define>

</ui:composition>
</html>

<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="f"  uri="http://java.sun.com/jsf/core"%>
<%@ taglib prefix="h"  uri="http://java.sun.com/jsf/html"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
	<link rel="stylesheet" type="text/css" href="../estilo.css">	
	<title>..:: Cadastro de Lançamentos Contábeis ::..</title>
</head>
<body>
<f:view>

<f:subview id="menu">
	<jsp:include page="../../menu.jsp" />
</f:subview>

<h:form id="f">
 <h:messages />
 <h:panelGrid  id="painelLancamento"  columns="3">
	<h:outputLabel id="lbid" value="ID" for="id" />
	<h:inputText id="id" value="#{lancamentoAction.lancamento.id}" size="10" />
	<h:message id="msgid" for="id" />

	<h:outputLabel id="lbdate" value="DATE" for="date" />
	<h:inputText id="date" value="#{lancamentoAction.lancamento.date}" size="10" >
		<f:convertDateTime pattern="dd/MM/yyyy"/>
	</h:inputText><!-- TODO vazer contação disto -->
	<h:message id="msgdate" for="date" />

	<h:outputLabel id="lbdebito" value="DEBITO" for="debito" />
	<h:selectOneMenu id="debito" value="#{lancamentoAction.contaDebito.id}">
		<f:selectItems value="#{lancamentoAction.siContaDebito}"/>	
	</h:selectOneMenu>
	<h:message id="msgdebito" for="debito" />

	<h:outputLabel id="lbcredito" value="CREDITO" for="credito" />
	<h:selectOneMenu id="credito" value="#{lancamentoAction.contaCredito.id}">
		<f:selectItems value="#{lancamentoAction.siContaCredito}"/>	
	</h:selectOneMenu>
	<h:message id="msgcredito" for="credito" />

	<h:outputLabel id="lbvalor" value="VALOR" for="valor" />
	<h:inputText id="valor" value="#{lancamentoAction.lancamento.valor}" size="10" >
		<f:convertNumber minFractionDigits="2" type="number"/>
	</h:inputText>
	<h:message id="msgvalor" for="valor" />

	<h:outputLabel id="lbhistorico" value="HISTORICO" for="historico" />
	<h:inputTextarea id="historico" value="#{lancamentoAction.lancamento.historico}" cols="60" rows="10"/>
	<h:message id="msghistorico" for="historico" />

	<h:outputLabel id="lbtipo" value="TIPO" for="tipo" />
	<h:selectOneMenu id="tipo" value="#{lancamentoAction.lancamentoTipo}">
		<f:selectItems value="#{lancamentoAction.siLancamentoTipo}"/>	
	</h:selectOneMenu>
	<h:message id="msgtipo" for="tipo" />

</h:panelGrid>

<h:commandLink id="novo" actionListener="#{lancamentoAction.novo}" value="novo" /> | 
<h:commandLink id="salvar" actionListener="#{lancamentoAction.salvar}" value="salvar" /> | 
<h:commandLink id="excluir" actionListener="#{lancamentoAction.excluir}" value="excluir" /> |
<h:commandLink id="listar" actionListener="#{lancamentoAction.listar}" value="listar" /> |

<h:dataTable id="tablela" var="item" value="#{lancamentoAction.lancamentoList}" width="100%" columnClasses="numero,data,centro,texto,texto,texto,numero">
	<h:column>
		<f:facet name="header"><h:outputText value="ID" /></f:facet>
		<h:outputText value="#{item.id}" />
	</h:column>
	<h:column>
		<f:facet name="header"><h:outputText value="DATE" /></f:facet>
		<h:outputText value="#{item.date}" >
			<f:convertDateTime pattern="dd/MM/yyyy"/>
		</h:outputText>
	</h:column>
	<h:column>
		<f:facet name="header"><h:outputText value="EXERCICIO" /></f:facet>
		<h:outputText value="#{item.exercicio.ano}" />
	</h:column>
	<h:column>
		<f:facet name="header"><h:outputText value="DEBITO" /></f:facet>
		<h:outputText value="#{item.debito.id}-#{item.debito.nome}" />
	</h:column>
	<h:column>
		<f:facet name="header"><h:outputText value="CREDITO" /></f:facet>
		<h:outputText value="#{item.credito.id}-#{item.credito.nome}" />
	</h:column>
	<h:column>
		<f:facet name="header"><h:outputText value="HISTORICO" /></f:facet>
		<h:outputText value="#{item.historico}" />
	</h:column>
	<h:column>
		<f:facet name="header"><h:outputText value="VALOR" /></f:facet>
		<h:outputText value="#{item.valor}">
			<f:convertNumber type="currency" currencySymbol="R$ "  />
		</h:outputText>
	</h:column>
</h:dataTable>
</h:form>
</f:view>
</body>
</html>
